<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>üß™ Testes - Mapas Mentais AWS</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .test-result { padding: 10px; margin: 5px 0; border-radius: 4px; }
        .pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #results { margin-top: 20px; }
        .stats { background: #e9ecef; padding: 15px; border-radius: 4px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Testes do Site - Mapas Mentais AWS</h1>
        
        <div class="stats" id="stats">
            <strong>Estat√≠sticas:</strong> Aguardando testes...
        </div>

        <button onclick="executarTodos()">üöÄ Executar Todos os Testes</button>
        <button onclick="testarBusca()">üîç Testar Busca</button>
        <button onclick="testarLinks()">üîó Testar Links</button>
        <button onclick="testarCategorias()">üìÇ Testar Categorias</button>
        <button onclick="limparResultados()">üßπ Limpar</button>

        <div id="results"></div>
    </div>

    <script>
        // Simular os dados do site principal
        const dados = [
            {
                categoria: 'üÜï AWS re:Invent 2025 - NOVIDADES',
                servicos: [
                    {nome: 'Amazon Nova (Modelos de IA Multimodal)', url: 'https://aws.amazon.com/bedrock/nova/'},
                    {nome: 'Amazon Q Developer Agent', url: 'https://aws.amazon.com/q/developer/'},
                    {nome: 'AWS App Studio (Low-Code)', url: 'https://aws.amazon.com/application-composer/'}
                ]
            },
            {
                categoria: 'Computa√ß√£o',
                servicos: [
                    {nome: 'Amazon EC2', url: 'https://aws.amazon.com/pt/ec2/'},
                    {nome: 'AWS Lambda', url: 'https://aws.amazon.com/pt/lambda/'},
                    {nome: 'Amazon Lightsail', url: 'https://aws.amazon.com/pt/lightsail/'}
                ]
            },
            {
                categoria: 'Armazenamento',
                servicos: [
                    {nome: 'Amazon S3', url: 'https://aws.amazon.com/pt/s3/'},
                    {nome: 'Amazon EFS', url: 'https://aws.amazon.com/pt/efs/'},
                    {nome: 'Amazon EBS', url: 'https://aws.amazon.com/ebs/'}
                ]
            }
        ];

        let totalTestes = 0;
        let testesPassaram = 0;

        function adicionarResultado(teste, passou, detalhes = '') {
            totalTestes++;
            if (passou) testesPassaram++;
            
            const div = document.createElement('div');
            div.className = `test-result ${passou ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <strong>${passou ? '‚úÖ' : '‚ùå'} ${teste}</strong>
                ${detalhes ? `<br><small>${detalhes}</small>` : ''}
            `;
            document.getElementById('results').appendChild(div);
            atualizarStats();
        }

        function atualizarStats() {
            const porcentagem = totalTestes > 0 ? Math.round((testesPassaram / totalTestes) * 100) : 0;
            document.getElementById('stats').innerHTML = `
                <strong>Estat√≠sticas:</strong> 
                ${testesPassaram}/${totalTestes} testes passaram (${porcentagem}%)
            `;
        }

        function testarBusca() {
            adicionarResultado('Teste de Busca', true, 'Iniciando testes de busca...');
            
            // Teste 1: Busca por "EC2"
            const resultadoEC2 = dados.flatMap(cat => 
                cat.servicos.filter(s => s.nome.toLowerCase().includes('ec2'))
            );
            adicionarResultado('Busca por "EC2"', resultadoEC2.length > 0, 
                `Encontrados ${resultadoEC2.length} servi√ßos com EC2`);

            // Teste 2: Busca por categoria "Computa√ß√£o"
            const resultadoComputacao = dados.filter(cat => 
                cat.categoria.toLowerCase().includes('computa√ß√£o')
            );
            adicionarResultado('Busca por categoria "Computa√ß√£o"', resultadoComputacao.length > 0,
                `Encontradas ${resultadoComputacao.length} categorias`);

            // Teste 3: Busca vazia deve retornar tudo
            adicionarResultado('Busca vazia retorna todos', dados.length > 0,
                `${dados.length} categorias dispon√≠veis`);
        }

        function testarLinks() {
            adicionarResultado('Teste de Links', true, 'Verificando URLs...');
            
            let linksValidos = 0;
            let totalLinks = 0;

            dados.forEach(categoria => {
                categoria.servicos.forEach(servico => {
                    totalLinks++;
                    if (servico.url && servico.url.startsWith('https://aws.amazon.com')) {
                        linksValidos++;
                    }
                });
            });

            adicionarResultado('Links oficiais AWS', linksValidos === totalLinks,
                `${linksValidos}/${totalLinks} links s√£o oficiais da AWS`);

            adicionarResultado('Todos os servi√ßos t√™m URLs', totalLinks > 0,
                `${totalLinks} servi√ßos com URLs definidas`);
        }

        function testarCategorias() {
            adicionarResultado('Teste de Categorias', true, 'Verificando estrutura...');
            
            // Teste 1: Todas as categorias t√™m nome
            const categoriasComNome = dados.filter(cat => cat.categoria && cat.categoria.trim() !== '');
            adicionarResultado('Categorias t√™m nomes', categoriasComNome.length === dados.length,
                `${categoriasComNome.length}/${dados.length} categorias nomeadas`);

            // Teste 2: Todas as categorias t√™m servi√ßos
            const categoriasComServicos = dados.filter(cat => cat.servicos && cat.servicos.length > 0);
            adicionarResultado('Categorias t√™m servi√ßos', categoriasComServicos.length === dados.length,
                `${categoriasComServicos.length}/${dados.length} categorias com servi√ßos`);

            // Teste 3: Contagem total de servi√ßos
            const totalServicos = dados.reduce((total, cat) => total + cat.servicos.length, 0);
            adicionarResultado('Contagem de servi√ßos', totalServicos > 0,
                `Total: ${totalServicos} servi√ßos AWS catalogados`);

            // Teste 4: Categoria re:Invent 2025 existe
            const temReinvent = dados.some(cat => cat.categoria.includes('re:Invent 2025'));
            adicionarResultado('Categoria re:Invent 2025 existe', temReinvent,
                'Novidades do re:Invent 2025 est√£o inclu√≠das');
        }

        function testarPerformance() {
            adicionarResultado('Teste de Performance', true, 'Medindo tempos...');
            
            const inicio = performance.now();
            
            // Simular renderiza√ß√£o
            dados.forEach(categoria => {
                categoria.servicos.forEach(servico => {
                    // Simular cria√ß√£o de elementos DOM
                    const elemento = document.createElement('div');
                    elemento.textContent = servico.nome;
                });
            });
            
            const fim = performance.now();
            const tempo = Math.round(fim - inicio);
            
            adicionarResultado('Renderiza√ß√£o r√°pida', tempo < 100,
                `Tempo de renderiza√ß√£o: ${tempo}ms`);
        }

        function executarTodos() {
            limparResultados();
            
            adicionarResultado('üöÄ Iniciando Bateria de Testes', true, 
                'Executando todos os testes automatizados...');
            
            setTimeout(() => testarCategorias(), 100);
            setTimeout(() => testarBusca(), 200);
            setTimeout(() => testarLinks(), 300);
            setTimeout(() => testarPerformance(), 400);
            
            setTimeout(() => {
                adicionarResultado('‚ú® Testes Conclu√≠dos', testesPassaram === totalTestes,
                    `Resultado final: ${testesPassaram}/${totalTestes} testes passaram`);
            }, 500);
        }

        function limparResultados() {
            document.getElementById('results').innerHTML = '';
            totalTestes = 0;
            testesPassaram = 0;
            atualizarStats();
        }

        // Executar teste b√°sico ao carregar
        window.onload = function() {
            adicionarResultado('üéØ Sistema de Testes Carregado', true, 
                'Pronto para executar testes do site AWS!');
        };
    </script>
</body>
</html>